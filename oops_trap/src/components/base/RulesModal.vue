<template>
  <div class="rules-content-wrapper">
    <div class="rules-accordion">
      <!-- Common Rules -->
      <div
        class="accordion-item"
        :class="{ 'accordion-item--active': activeSection === 'common' }"
      >
        <div class="accordion-header" @click="toggleSection('common')">
          <h3 class="accordion-title">Common Rules</h3>
          <span class="accordion-icon">{{
            activeSection === "common" ? "−" : "+"
          }}</span>
        </div>
        <div v-if="activeSection === 'common'" class="accordion-content">
          <div class="rules-text-content">
            <h4>Basic Game Rules</h4>
            <ul>
              <li>
                Игра создана в стиле мультиплеера в 2d стилистике. Данный релиз
                - так называемая игра для своих: подразумевается , что в одну
                игру могут играть только заранее договорившиеся люди.
              </li>
              <li>
                После входа в личный кабинет у Вас есть возможность создать
                лобби, присоединиться к лобби по инвайт коду (есть только у
                создателя и участников лобби, поэтому поиграть в данную игру в
                одиночку не выйдет), почитать правила, посмотреть свои
                достижения и вернуться на стартовую страницу.
              </li>
              <li>
                В игре в есть две роли трапмейкер (1 игрок) и раннеры (от 2
                игроков). Их геймплей сильно отличается, поэтому подробнее о нем
                вы можете прочитать ниже.
              </li>
              <li>
                Создатель лобби может выбрать:
                <ul>
                  <li>
                    Карту, на которой будет происходить игра. Если карта не
                    выбрана или выбран режим рандома - карта определяется
                    случайным образом
                  </li>
                  <li>
                    Трапмейкера: если он не выбран или выбран режим рандома - он
                    определяется случайным образом
                  </li>
                  <li>
                    Время: существуют три режима времени для каждой карты,
                    требуется выбрать один из них, по умолчанию стоит средний
                  </li>
                </ul>
              </li>
              <li>
                Чтобы поиграть, одному участнику нужно создать лобби и сообщить
                инвайт-код остальным участникам. Участники вводят код выбрав
                опцию "присоединиться к лобби". В лобби можно увидеть ники
                участников, цвета их персонажей (назначаются рандомно).
              </li>
              <li>
                Сама игра начинается прожатием готовности у создателя лобби,
                появляется загрузочный экран - записка, из которой можно узнать
                свою роль и небольшую предысторию. По завершении игры вы также
                увидите экран с итогами матча. После вы можете вернуться как в
                лобби, из которого запускалась игра, так и выйти из него.
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Trapmaker Rules -->
      <div
        class="accordion-item"
        :class="{ 'accordion-item--active': activeSection === 'trapmaker' }"
      >
        <div class="accordion-header" @click="toggleSection('trapmaker')">
          <h3 class="accordion-title">Trapmaker Rules</h3>
          <span class="accordion-icon">{{
            activeSection === "trapmaker" ? "−" : "+"
          }}</span>
        </div>
        <div v-if="activeSection === 'trapmaker'" class="accordion-content">
          <div class="rules-text-content">
            <h4>Trapmaker Responsibilities</h4>
            <ul>
              <li>
                Задача трапмейкера - не дать раннерам добраться до конца карты
                за отведённое время (у каждой карты три режима времени
                прохождения). С помощью ловушек он может ловить раннеров,
                отнимая у них при этом одну жизнь и возвращая в начало карты.
                Условие победы трапмейкера - никто из раннеров не добрался до
                финиша за отведённое время, или у всех игроков закончились
                жизни. Геймплей трапмейкера включает только активацию ловушек
                нажатием на соответствующие кнопки, иной логики у трапмейкера в
                данном релизе нет.
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Runner Rules -->
      <div
        class="accordion-item"
        :class="{ 'accordion-item--active': activeSection === 'runner' }"
      >
        <div class="accordion-header" @click="toggleSection('runner')">
          <h3 class="accordion-title">Runner Rules</h3>
          <span class="accordion-icon">{{
            activeSection === "runner" ? "−" : "+"
          }}</span>
        </div>
        <div v-if="activeSection === 'runner'" class="accordion-content">
          <div class="rules-text-content">
            <h4>Runner Objectives</h4>
            <ul>
              <li>
                Задача бегущего - добраться до финиша за отведённое время, не
                умерев от статических и динамических ловушек. При попадании в
                ловушку у бегущего отнимается одна жизнь (общее количество
                жизней зависит от карты). Условие победы бегущего - игрок достиг
                финиша до истечения времени. Геймплей бегущего: стрелочки
                влево-вправо (или клавиши AD) для передвижения по земле; нажатие
                на W для прыжка; удержание клавиш WASD для перемещений по лианам
                и в воде, нажатие пробела для прыжка с лианы или воды.
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Maps Rules -->
      <div
        class="accordion-item"
        :class="{ 'accordion-item--active': activeSection === 'maps' }"
      >
        <div class="accordion-header" @click="toggleSection('maps')">
          <h3 class="accordion-title">Maps & Environment</h3>
          <span class="accordion-icon">{{
            activeSection === "maps" ? "−" : "+"
          }}</span>
        </div>
        <div v-if="activeSection === 'maps'" class="accordion-content">
          <div class="rules-text-content">
            <h4>Map Types</h4>
            <ul>
              <li>
                На данный момент доступен выбор из двух карт - "Я вижу свет" и
                "Глубокие пещеры".
              </li>
              <li>
                <strong>"Я вижу свет"</strong>
                <ul>
                  <li>На этой карте у игрока будет одна жизнь.</li>
                  <li>
                    Игра начинается со спавна в пещере, из которой требуется
                    выбраться.
                  </li>
                  <li>
                    Всего на карте 3 яруса с различными ловушками и паркуром.
                  </li>
                  <li>
                    Игрока на данной карте ожидают следующие ловушки:
                    <ul>
                      <li>
                        Водоем с хищными рыбами. Нужно переплыть водоем, но
                        нельзя слишком долго находиться под водой, игрок может
                        задохнуться. Рыбы в водоеме активируются траппером и
                        могут убить игрока.
                      </li>
                      <li>
                        Паркур, разрушающиеся каменные платформы. При падении
                        вниз с паркура игрок разбивается и умирает. При
                        активации ловушки траппером, каменная платформа
                        разрушается и игрок падает вместе с ней вниз.
                      </li>
                      <li>
                        Лава. При соприкосновении с лавой игрок сгорает и
                        умирает.
                      </li>
                      <li>
                        Подъем наверх по камням и лианам. Чтобы подниматься по
                        лианам, игрок должен зажимать пробел. Траппер может
                        обрывать лианы, активировав ловушку.
                      </li>
                      <li>
                        Деревянные балки на цепях. Траппер может активировать
                        ловушку, балки сломаются, игрок упадет вниз.
                      </li>
                      <li>
                        Падающие каменные глыбы. При активации ловушки
                        траппером, с потолка пещеры падают каменные глыбы. Если
                        по игроку попадает глыба, он теряет жизнь.
                      </li>
                      <li>
                        Лианы. Нужно забраться наверх. Траппер может обрывать
                        лианы (динамическая ловушка)
                      </li>
                      <li>
                        Большой камень. При активации ловушки траппером, камень
                        начинает катиться вниз по склону.
                      </li>
                      <li>
                        Ямы. При активации ловушки земля проваливается и
                        образуется пропасть. Игрок может её перепрыгнуть. Внизу
                        будут добавлены копья.
                      </li>
                    </ul>
                  </li>
                  <li>
                    В пещере на первом ярусе игроку предстоит преодолеть водоем
                    с хищными рыбами и паркур с разрушающимися каменными
                    платформами. На второй ярус игрок поднимается по лианам и
                    камням, стараясь не упасть в лаву. На втором ярусе игрока
                    ожидает паркур по деревянным балкам на цепях, которые могут
                    быть разрушены траппером, а перед подъемом на поверхность
                    его ожидают падающие с потолка пещеры каменные глыбы и залаз
                    по лианам. На поверхности, на третьем ярусе карты, игроку
                    предстоит избежать большого катящегося камня, при этом не
                    упав в ямы с копьями. После прохождения всех ловушек на
                    поверхности игрока ожидает финиш.
                  </li>
                </ul>
              </li>

              <li>
                <strong>"Глубокие пещеры"</strong>
                <ul>
                  <li>На этой карте у игрока будет 2 жизни.</li>
                  <li>Игра начинается со спавна глубоко в пещере.</li>
                  <li>
                    Всего на карте 3 яруса с различными ловушками и паркуром.
                  </li>
                  <li>
                    Игрока на данной карте ожидают следующие ловушки:
                    <ul>
                      <li>
                        Пространство с газом между закрывающимися воротами. Если
                        игрок остается в закрытом пространстве между закрытыми
                        воротами, он задыхается от ядовитого газа.
                      </li>
                      <li>
                        Лианы. Игроку нужно забраться по лианам. Чтобы
                        подниматься по лианам, игрок должен зажимать пробел. Но
                        если задержаться на лианах надолго, с них можно упасть.
                      </li>
                      <li>
                        Деревянные люки. По активации ловушки траппером
                        деревянные люки могут открыться, а камни которые они
                        сдерживают раздавят игрока.
                      </li>
                      <li>
                        Паркур (повторяется несколько раз). При падении вниз
                        игрок разбивается и теряет жизнь.
                      </li>
                      <li>
                        Водоём с ядом. Изначально водоем не содержит яд и игроку
                        нужно просто переплыть его, главное не задерживаться
                        слишком долго и не задохнуться. Но траппер может
                        активировать ловушку, тем самым отравить эту воду. В
                        отправленной воде игроки теряют жизнь.
                      </li>
                      <li>Водоем. Нужно переплыть водоем.</li>
                      <li>
                        Падающие с потолка каменные глыбы. При активации ловушки
                        траппером, с потолка пещеры падают каменные глыбы. Если
                        по игроку попадает глыба, он теряет жизнь.
                      </li>
                      <li>
                        Веревочный канат. Канат, по которому игрокам нужно
                        забраться наверх. Траппер может активировать ловушку и
                        поджечь канат, находящиеся на нем игроки сгорят или
                        упадут и разобьются, потеряют жизнь.
                      </li>
                      <li>
                        Гейзеры. Из гейзеров выстреливает горячая вода. При
                        попадании на гейзер игрок теряет жизнь.
                      </li>
                      <li>
                        Паркур. Нужно пропрыгать по деревянным дощечкам (одну из
                        которых может сломать траппер) и не упасть вниз. При
                        падении вниз игрок разбивается и теряет жизнь.
                      </li>
                      <li>
                        Водоем. Игроку нужно выплыть наверх. Если он поплывет в
                        неправильном направлении, ему может не хватить запаса
                        кислорода, он может задохнуться и потерять жизнь. Также
                        траппер может активировать ловушку, вода из этого
                        водоема начнет засасывать игроков, и они потеряют жизнь.
                      </li>
                    </ul>
                  </li>
                  <li>
                    В пещере на первом ярусе игроку предстоит преодолеть ловушку
                    с ядовитым газом, не попав в закрытое пространство и не
                    задохнувшись. Далее по лианам игрок пробирается к следующей
                    ловушке, где у него есть риск оказаться раздавленным
                    камнями. После этого игрока ожидает паркур, где он может
                    разбиться при падении. После паркура игрок попадает в водоем
                    с водой, по которому он может перебраться на второй ярус
                    карты. Но ему нужно быть начеку, потому что траппер может
                    отравить водоем, и игрок потеряет жизнь. Дальше игрока ждет
                    еще один водоем, на этот раз без ловушки. После преодоления
                    водоема на втором ярусе его ожидает еще паркур и падающие с
                    потолка пещеры каменные глыбы. На третий ярус игрок
                    поднимается по веревочному канату, который может быть сожжён
                    траппером. На третьем ярусе пещеры игроку предстоит пройти
                    ловушку с гейзерами, паркур и переплыть еще один водоем,
                    выбрав правильное направление и не утонув. После последнего
                    водоема игрок попадает на финиш.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "RulesModal",

  props: {
    initialSection: {
      type: String,
      default: "common",
    },
  },

  data() {
    return {
      activeSection: this.initialSection,
    };
  },

  methods: {
    toggleSection(section) {
      this.activeSection = this.activeSection === section ? null : section;
    },
  },
};
</script>

<style scoped>
.rules-accordion {
  background: rgb(26, 88, 85);
  border-radius: 10px;
}

.accordion-item {
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}

.accordion-item--active {
  background: rgba(255, 255, 255, 0.15);
}

.accordion-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.accordion-header:hover {
  background: rgba(255, 255, 255, 0.1);
}

.accordion-title {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
  color: #f5f5f5;
  font-family: "Irish Grover", system-ui;
}

.accordion-icon {
  font-size: 1.5rem;
  font-weight: 300;
  color: #e0e0e0;
  min-width: 20px;
  text-align: center;
}

.accordion-content {
  background: rgba(255, 255, 255, 0.05);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.rules-text-content {
  padding: 2rem;
  max-height: 200px;
  overflow-y: auto;
}

.rules-text-content h4 {
  color: #f5f5f5;
  margin: 1.5rem 0 0.5rem 0;
  font-size: 1.1rem;
  font-family: "Irish Grover", system-ui;
}

.rules-text-content h4:first-child {
  margin-top: 0;
}

.rules-text-content ul {
  margin: 0.5rem 0 1rem 0;
  padding-left: 1.5rem;
}

.rules-text-content li {
  margin: 0.5rem 0;
  line-height: 1.5;
  color: #f5f5f5;
}

.accordion-content {
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.rules-text-content::-webkit-scrollbar {
  width: 6px;
}

.rules-text-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.rules-text-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.rules-text-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}
</style>
